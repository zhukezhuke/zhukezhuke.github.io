<html>
<head>
<title>
AJAXHELPER的GET和POST请求的封装类
</title>
<meta name="keywords" content="AJAXHELPER,GET,POST,请求,封装类">
<meta name="description" content="AJAXHELPER的GET和POST请求的封装类">
<link href="bootstrap-combined.min.css" rel="stylesheet">
<style type='text/css'>
    body {
      background-color: #CCC;
    }
    #content {
      background-color: #FFF;
      border-radius: 5px;
    }
    #content .main {
      padding: 20px;
    }
    #content .sidebar {
      padding: 10px;
    }
    #content p {
      line-height: 30px;
    }
</style>
</head>
<body>
<div class='container'>

    <h1>优知网</h1>
    <div class='navbar navbar-inverse'>
      <div class='navbar-inner nav-collapse' style="height: auto;">
        <ul class="nav">
          <li class="active"><a href="http://www.s8e.net/index.html">主页</a></li>
          <li><a href="http://www.s8e.net/about.html">关于我</a></li>
        </ul>
      </div>
    </div>
    <div id='content' class='row-fluid'>
<script type="text/javascript">
    /*960*60 创建于 2014-08-06*/
    var cpro_id = "u1646650";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>


<script type="text/javascript">
    /*960*90 创建于 2014-08-06*/
    var cpro_id = "u1646661";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>


<script type="text/javascript">
    /*960*60 创建于 2014-08-06*/
    var cpro_id = "u1646663";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
 <div class='span9 main'>
        <h2>AJAXHELPER的GET和POST请求的封装类</h2>
var ajaxHelper = {
    //1.得到异步对象
    GetXhr: function () {
        var xhr;
        if (window.XMLHttpRequest) {
           //兼容新式浏览器
            xhr = new XMLHttpRequest();
        } else { //兼容IE老式浏览器
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
        //返回异步对象
        return xhr;
    },
    //2.定义get请求
    ajaxGet: function (url, callback) {
        this.ajaxComm("get", url, null, callback);
    },
    //3.定义post请求
    ajaxPost: function (url,params,callback) {
        this.ajaxComm("post",url,params,callback);
    },
    //4.公共请求方法
   //method：get,post
   //url:需要发送的请求地址
   //parms:发送给服务器的数据，post的时候才有值，get为null
   //callbakc:请求成功以后的回调函数
    ajaxComm: function (method, url, params, callbakc) {
        //1.0创建异步对象
        var xhr = this.GetXhr();
        //2.0设置请求的参数
        xhr.open(method, url, params, callbakc);
        //3.0防止缓存
        if (method == "get") {
            xhr.setRequestHeader("If-Modified-Since", "0");
        } else {
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        }
        //4.0设置回调函数
        xhr.onreadystatechange = function () {
            if(xhr.readyState==4&&xhr.status==200){
                var objdata = xhr.responseText;
                var data = JSON.parse(objdata);
                //执行业务逻辑
                callbakc(data);
            }
        }
        //5.0发送请求
        xhr.send(params);

    }
}








<div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"32"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>


<!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="请替换成文章的标题" data-url="请替换成文章的网址"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"s8e"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
<!-- 多说公共JS代码 end -->


<script type="text/javascript">
    /*960*90 创建于 2014-08-06*/
    var cpro_id = "u1646660";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
<script type="text/javascript">
    /*300*250 创建于 2014-08-06*/
var cpro_id = "u1646673";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/f.js" type="text/javascript"></script>
<script type="text/javascript">
    /*120*270 创建于 2014-08-06*/
var cpro_id = "u1646675";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/f.js" type="text/javascript"></script>
</div>
  </div>
</body>
</html>